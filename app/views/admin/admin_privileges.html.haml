- content_for :title, "Admin Privileges"
  

.container.body_whole_custom
  = simple_form_for :search_form do |f|
    .container-fluid.bg_none
      %img.toa_logo{:src => "/assets/me_logo.png", :alt => "Department of Mechanical Engineering"}
    .container-fluid.bg_none
      = f.input :search_input, as: :string, label: false , required: false
      = f.button :submit, "Search", name:"search_button", class: "btn btn-primary agreement_buttons justify-content-center button_toa_1", id:"submit_choice", "data-disable-with" => "Submitting.."

  = simple_form_for :privilege_form, :input_html => {:id => "privilege_form"} do |f|
    .container-fluid.bg_none
      .container-fluid.bg_none
        %table.table.table-hover.table-dark
          
          %tbody
            %tr.medium
              %th{:colspan => "1", :style => "width: 5%;"} #
              %th{:colspan => "1", :style => "width: 25%;"} Name
              %th{:colspan => "1", :style => "width: 10%;"} Username
              %th{:colspan => "1", :style => "width: 10%;"} Suspended
              %th{:colspan => "1", :style => "width: 10%;"} Admin
              %th{:colspan => "4", :style => "width: 40%;"} Actions

            - @users_list.to_a.each_with_index do |user, index|
              - if user[:givenname] == nil  
                - user[:givenname] = ""
              - if user[:sn] == nil 
                - user[:sn] = ""
              - whole_name = user[:givenname] + " " + user[:sn]
              %tr.small
                = f.input :form_username, :as => :hidden, :input_html => {:id => "form_username", :value => "" }
                %td{:colspan => "1", :style => "width: 5%;"} #{index+1}
                %td{:colspan => "1", :style => "width: 25%;"} #{whole_name}
                %td{:colspan => "1", :style => "width: 10%;"} #{user[:username]}
                %td{:colspan => "1", :style => "width: 10%;"} #{user[:suspended]}
                %td{:colspan => "1", :style => "width: 10%;"} #{user[:unsuspended]}
                %td{:colspan => "1", :style => "width: 10%;"} 
                  = f.button :submit, "Suspend", name:"suspend_button", class: "btn btn-primary action_buttons justify-content-center small", id:"submit_choice", "data-disable-with" => "Submitting..", onclick: "userFunction('#{user[:username]}')"
                %td{:colspan => "1", :style => "width: 10%;"}
                  = f.button :submit, "Unsuspend", name:"unsuspend_button", class: "btn btn-primary action_buttons justify-content-center small", id:"submit_choice", "data-disable-with" => "Submitting.."
                %td{:colspan => "1", :style => "width: 10%;"} 
                  = f.button :submit, "Make Admin", name:"make_admin_button", class: "btn btn-primary action_buttons justify-content-center small", id:"submit_choice", "data-disable-with" => "Submitting.."
                %td{:colspan => "1", :style => "width: 10%;"} 
                  = f.button :submit, "Remove Admin", name:"remove_admin_button", class: "btn btn-primary action_buttons justify-content-center small", id:"submit_choice", "data-disable-with" => "Submitting.."


